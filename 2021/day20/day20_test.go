package main

import (
	"testing"

	"github.com/stretchr/testify/assert"
)

func TestDay20_BinaryStringToInt(t *testing.T) {
	input := "000100010"
	output := Day20BinaryStringToInt(input)
	assert.Equal(t, 34, output, "they should be equal")
}

func TestDay20(t *testing.T) {
	enhancementAlgorithm := "..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#"
	input := [][]string{
		[]string{"#", ".", ".", "#", "."},
		[]string{"#", ".", ".", ".", "."},
		[]string{"#", "#", ".", ".", "#"},
		[]string{".", ".", "#", ".", "."},
		[]string{".", ".", "#", "#", "#"},
	}
	output := Day20(input, enhancementAlgorithm, 2)
	assert.Equal(t, 35, output, "they should be equal")
}

func TestDay20_1(t *testing.T) {
	enhancementAlgorithm := "..#.#..#####.#.#.#.###.##.....###.##.#..###.####..#####..#....#..#..##..###..######.###...####..#..#####..##..#.#####...##.#.#..#.##..#.#......#.###.######.###.####...#.##.##..#..#..#####.....#.#....###..#.##......#.....#..#..#..##..#...##.######.####.####.#.#...#.......#..#.#.#...####.##.#......#..#...##.#.##..#...##.#.##..###.#......#.#.......#.#.#.####.###.##...#.....####.#..#..#.##.#....##..#.####....##...##..#...#......#.#.......#.......##..####..#...#.#.#...##..#.#..###..#####........#..####......#..#"
	input := [][]string{
		[]string{"#", ".", ".", "#", "."},
		[]string{"#", ".", ".", ".", "."},
		[]string{"#", "#", ".", ".", "#"},
		[]string{".", ".", "#", ".", "."},
		[]string{".", ".", "#", "#", "#"},
	}
	output := Day20(input, enhancementAlgorithm, 50)
	assert.Equal(t, 3351, output, "they should be equal")
}
